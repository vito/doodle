class(Anatomy::Document < Nokogiri::HTML::Document):
  attr-accessor(#title, #tag, #tags, #styles, #up, #down)

  define(initialize):
    super

    @title = nil
    @tag = ""
    @tags = Hash new
    @styles = [Anatomy::Styles::Default]
    @up = nil
    @down = Hash new -- tag -> document

  apply-styles := do:
    @styles each (m):
      m apply(self)

    self

  define(depth):
    d = 0
    p = self

    while(p =! p up):
      d += 1

    d
